---
layout: post
title: Linux 磁盘相关命令简介：df、du、hdparm
category: Linux
tags: du df hdparm
---

#### 检查文件系统的磁盘受用情况：`df`

* -a 显示所有文件系统的磁盘使用情况
* -k 以k字节为单位显示。
* -m 以M字节为单位显示。
* -T 显示文件系统类型
* -h 以K、M、G为单位显示，换算单位为1024
* -h 以K、M、G为单位显示，换算单位为1000

例：
> $ df -TH

结果：

```python
文件系统       1K-blocks     已用     可用 已用% 挂载点
/dev/sda8      100658932 11934424 83588212   13% /
none                   4        0        4    0% /sys/fs/cgroup
udev             2026148        4  2026144    1% /dev
tmpfs             407168     1132   406036    1% /run
none                5120        0     5120    0% /run/lock
none             2035828     2528  2033300    1% /run/shm
none              102400       24   102376    1% /run/user
```

#### 统计目录或者文件所占磁盘空间大小：`du`

* -a 显示所有指定目录
* -b 以byte为单位显示
* -m 以MB为单位显示
* -s 仅显示总计，即当前目录或者文件实际所占用的空间
* -h 以 K、M、G 为单位显示、提高可读性

例：
> $ du -hs temp 图片 下载 音乐 桌面

结果：

```python
1.6G	temp
980K	图片
764M	下载
75M	音乐
80K	桌面
```

#### 磁盘维护：`hdparm`

* -a<快取分区>   设定读取文件时，预先存入块区的分区数，若不加上<快取分区>选项，则显示目前的设定。
* -A<0或1>   启动或关闭读取文件时的快取功能。
* -c<I/O模式>   设定IDE32位I/O模式。
* -C   检测IDE硬盘的电源管理模式。
* -d<0或1>   设定磁盘的DMA模式。
* -f   将内存缓冲区的数据写入硬盘，并清楚缓冲区。
* -g   显示硬盘的磁轨，磁头，磁区等参数。
* -h   显示帮助。
* -i   显示硬盘的硬件规格信息，这些信息是在开机时由硬盘本身所提供。
* -I   直接读取硬盘所提供的硬件规格信息。
* -k<0或1>   重设硬盘时，保留-dmu参数的设定。
* -K<0或1>   重设硬盘时，保留-APSWXZ参数的设定。
* -m<磁区数>   设定硬盘多重分区存取的分区数。
* -n<0或1>   忽略硬盘写入时所发生的错误。
* -p<PIO模式>   设定硬盘的PIO模式。
* -P<磁区数>   设定硬盘内部快取的分区数。
* -q   在执行后续的参数时，不在屏幕上显示任何信息。
* -r<0或1>   设定硬盘的读写模式。
* -S<时间>   设定硬盘进入省电模式前的等待时间。
* -t   评估硬盘的读取效率。
* -T   评估硬盘快取的读取效率。
* -u<0或1>   在硬盘存取时，允许其他中断要求同时执行。
* -v   显示硬盘的相关设定。
* -W<0或1>   设定硬盘的写入快取。
* -X<传输模式>   设定硬盘的传输模式。
* -y   使IDE硬盘进入省电模式。
* -Y   使IDE硬盘进入睡眠模式。
* -Z   关闭某些Seagate硬盘的自动省电功能。

例：
> $ sudo hdparm -T /dev/sda8

结果：

```python
/dev/sda8:
 Timing cached reads:   8466 MB in  2.00 seconds = 4236.29 MB/sec
```
